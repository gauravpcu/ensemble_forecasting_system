# Ensemble Forecasting System Configuration
# Copy this file to .env and customize for your environment

# ============================================================================
# DATA PATHS
# ============================================================================

# Source data file (order history)
SOURCE_DATA_FILE=/Volumes/ESSD-1/M4Downloads/order_history_2025-10-28.csv

# Data directory
DATA_DIR=./data

# Test data directory
TEST_DATA_DIR=./test/data

# Results output directory
RESULTS_DIR=./results

# ============================================================================
# MODEL CONFIGURATION
# ============================================================================

# LightGBM model path
LIGHTGBM_MODEL_PATH=./data/lightgbm_model.pkl

# Feature configuration
FEATURE_CONFIG_PATH=./data/feature_config.json

# DeepAR SageMaker endpoint
DEEPAR_ENDPOINT_NAME=forecasting-deepar-2025-10-31-05-59-41-035
DEEPAR_REGION=us-west-2

# ============================================================================
# ENSEMBLE WEIGHTS
# ============================================================================

# Model weights (must sum to 1.0)
LIGHTGBM_WEIGHT=0.95
DEEPAR_WEIGHT=0.05

# ============================================================================
# DATA EXTRACTION SETTINGS
# ============================================================================

# Number of days for validation period (most recent)
VALIDATION_DAYS=14

# Number of days for test period (before validation)
TEST_DAYS=14

# Total days to extract (VALIDATION_DAYS + TEST_DAYS)
TOTAL_EXTRACTION_DAYS=28

# ============================================================================
# CLASSIFICATION SETTINGS
# ============================================================================

# Threshold for classification (units)
# Items with predicted/actual >= threshold are classified as "needs reorder"
CLASSIFICATION_THRESHOLD=5

# ============================================================================
# TESTING CONFIGURATION
# ============================================================================

# Customers to include in focused test (comma-separated)
FOCUSED_TEST_CUSTOMERS=scionhealth,mercy

# Sample size for quick testing (set to 0 or empty for all data)
TEST_SAMPLE_SIZE=

# Enable verbose logging
VERBOSE=true

# ============================================================================
# PERFORMANCE THRESHOLDS
# ============================================================================

# MAPE thresholds for performance categories
MAPE_EXCELLENT=30
MAPE_GOOD=50
MAPE_FAIR=75
# Above MAPE_FAIR is considered "Poor"

# ============================================================================
# AWS CONFIGURATION
# ============================================================================

# AWS credentials (optional, uses default profile if not set)
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_DEFAULT_REGION=us-west-2

# ============================================================================
# BEDROCK LLM CONFIGURATION (Optional)
# ============================================================================

# Enable LLM augmentation
USE_LLM_AUGMENTATION=false

# Bedrock settings
BEDROCK_REGION=us-east-1
BEDROCK_MODEL_ID=anthropic.claude-3-sonnet-20241022-v2:0
BEDROCK_MAX_RETRIES=3
BEDROCK_RETRY_DELAY=1
LLM_CONFIDENCE_THRESHOLD=0.7

# ============================================================================
# PROCESSING SETTINGS
# ============================================================================

# Batch size for predictions
BATCH_SIZE=1000

# Number of parallel workers (0 = auto)
NUM_WORKERS=0

# Memory limit (MB, 0 = no limit)
MEMORY_LIMIT=0

# ============================================================================
# OUTPUT SETTINGS
# ============================================================================

# Save predictions to CSV
SAVE_PREDICTIONS=true

# Generate visualizations
GENERATE_PLOTS=false

# Output file format (csv, parquet, json)
OUTPUT_FORMAT=csv

# Compression (none, gzip, bzip2)
OUTPUT_COMPRESSION=none

# ============================================================================
# LOGGING
# ============================================================================

# Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# Log file path (empty = console only)
LOG_FILE=

# ============================================================================
# SAFETY MULTIPLIERS
# ============================================================================

# Safety stock multipliers by volume category
SAFETY_MULTIPLIER_LOW=2.0
SAFETY_MULTIPLIER_MEDIUM=1.5
SAFETY_MULTIPLIER_HIGH=1.2

# Volume category thresholds
VOLUME_LOW_THRESHOLD=5
VOLUME_MEDIUM_THRESHOLD=20
VOLUME_HIGH_THRESHOLD=100

# ============================================================================
# CALIBRATION
# ============================================================================

# Global calibration multiplier (to correct systematic bias)
GLOBAL_CALIBRATION_MULTIPLIER=1.0

# Customer-specific calibration (comma-separated: customer:multiplier)
CUSTOMER_CALIBRATION=scionhealth:1.05,mercy:0.85

# ============================================================================
# FEATURE ENGINEERING
# ============================================================================

# Rolling window sizes (days)
ROLLING_WINDOW_SHORT=7
ROLLING_WINDOW_LONG=30

# Lag periods (days)
LAG_PERIODS=7,14,30

# Seasonal period (days)
SEASONAL_PERIOD=7

# ============================================================================
# VALIDATION SETTINGS
# ============================================================================

# Minimum records required for analysis
MIN_RECORDS_FOR_ANALYSIS=10

# Minimum actual value for MAPE calculation
MIN_VALUE_FOR_MAPE=1

# ============================================================================
# NOTIFICATION SETTINGS (Optional)
# ============================================================================

# Email notifications
ENABLE_EMAIL_NOTIFICATIONS=false
EMAIL_SMTP_SERVER=
EMAIL_SMTP_PORT=587
EMAIL_FROM=
EMAIL_TO=
EMAIL_USERNAME=
EMAIL_PASSWORD=

# Slack notifications
ENABLE_SLACK_NOTIFICATIONS=false
SLACK_WEBHOOK_URL=

# ============================================================================
# VISUALIZATION SETTINGS
# ============================================================================

# Plot figure sizes
PLOT_FIGURE_SIZE_WIDTH=12
PLOT_FIGURE_SIZE_HEIGHT=6
PLOT_SUBPLOT_WIDTH=15
PLOT_SUBPLOT_HEIGHT=5

# Plot quality and appearance
PLOT_DPI=300
PLOT_ALPHA=0.5
PLOT_SCATTER_SIZE=10
PLOT_STYLE=whitegrid

# ============================================================================
# FILE PROCESSING SETTINGS
# ============================================================================

# File encoding and formats
FILE_ENCODING=utf-8
CSV_SEPARATOR=,
DECIMAL_PLACES=2
DATE_FORMAT=%Y-%m-%d
DATETIME_FORMAT=%Y-%m-%d %H:%M:%S

# ============================================================================
# DATA SAMPLING SETTINGS
# ============================================================================

# Random state for sampling
DEFAULT_SAMPLE_RANDOM_STATE=42

# Maximum records for quick testing
MAX_RECORDS_FOR_QUICK_TEST=5000

# Prediction length in days
PREDICTION_LENGTH_DAYS=14

# ============================================================================
# ROLLING STATISTICS SETTINGS
# ============================================================================

# Rolling window configuration
ROLLING_WINDOW_MIN_PERIODS=1
ROLLING_MAX_WINDOW_SIZE=30

# ============================================================================
# FILE SIZE AND MEMORY SETTINGS
# ============================================================================

# Maximum file size for processing (MB)
MAX_FILE_SIZE_MB=1000

# Chunk size for large file processing
CHUNK_SIZE_ROWS=10000

# Maximum memory usage percentage
MAX_MEMORY_USAGE_PCT=80

# ============================================================================
# TIMEOUT AND RETRY SETTINGS
# ============================================================================

# Default timeout for operations (seconds)
DEFAULT_TIMEOUT_SECONDS=300

# Retry configuration
MAX_RETRY_ATTEMPTS=3
RETRY_DELAY_SECONDS=1
CONNECTION_TIMEOUT=30

# ============================================================================
# ADVANCED SETTINGS
# ============================================================================

# Random seed for reproducibility
RANDOM_SEED=42

# Enable caching
ENABLE_CACHING=true

# Cache directory
CACHE_DIR=./.cache

# Maximum cache age (hours)
CACHE_MAX_AGE=24

# Enable profiling
ENABLE_PROFILING=false

# Profile output directory
PROFILE_OUTPUT_DIR=./profiles
